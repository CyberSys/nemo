DIR = src/orbit/potential
BIN = potlist rotcurves potccd
NEED = $(BIN) ccdprint ccdmath

help:
	@echo $(DIR)

need:
	@echo $(NEED)

clean:
	@echo Cleaning $(DIR)
	@rm -f plummer.ccd plummer1.tab plummer2.tab

NBODY = 10

all:    $(BIN)

potlist: 
	@echo Running $@
	potlist harmonic  x=1 dr=0.001
	potlist plummer   x=1 dr=0.001
	potlist isochrone x=1 dr=0.001
	potlist athan92   x=0.00001

rotcurves:
	rotcurves isochrone 0,1,1 - halo 0,1,1 - plummer 0,0.15,0.05 \
		radii=0:4:0.02 

plummer.ccd:
	potccd out=plummer.ccd potname=plummer x=-2:2:0.05 y=-2:2:0.05

potccd: plummer.ccd
	potccd - harmonic x=-1:1:0.2 y=-1:1:0.2 |\
		ccdprint - x= y= format=%4.3f label=x,y
	potccd - harmonic x=-1:1:0.2 y=-1:1:0.2 dr=0.01 |\
		ccdprint - x= y= format=%4.3f label=x,y
	potlist ccd potfile=plummer.ccd x=0:2:0.1 dr=0.001 | awk '{print $$1,$$4,$$7,$$11}' > plummer1.tab
	potlist plummer                 x=0:2:0.1 dr=0.001 | awk '{print $$1,$$4,$$7,$$11}' > plummer2.tab
	tabmath plummer1.tab,plummer2.tab - %1,%2-%6,%3-%7,%4-%8 all format=%f

